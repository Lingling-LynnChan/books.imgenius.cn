# BookSite - å›¾ä¹¦åˆ†äº«å¹³å°

ä¸€ä¸ªåŸºäº Django çš„åœ¨çº¿å›¾ä¹¦åˆ†äº«å’Œè¯„è®ºå¹³å°ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ“š å›¾ä¹¦ä¿¡æ¯ç®¡ç†å’Œå±•ç¤º
- ğŸ‘¥ ç”¨æˆ·æ³¨å†Œå’Œè®¤è¯ç³»ç»Ÿ
- ğŸ’¬ å›¾ä¹¦è¯„è®ºå’Œè®¨è®º
- ğŸ” å›¾ä¹¦æœç´¢å’Œç­›é€‰
- ğŸ“± å“åº”å¼è®¾è®¡
- ğŸ³ Docker å®¹å™¨åŒ–éƒ¨ç½²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€è¡Œå‘½ä»¤æ„å»º
```bash
./build.sh
```
æˆ–
```bash
make build
```

### ä¸€è¡Œå‘½ä»¤éƒ¨ç½²

**å¼€å‘ç¯å¢ƒï¼š**
```bash
./deploy.sh dev
```
æˆ–
```bash
make dev
```

**ç”Ÿäº§ç¯å¢ƒï¼š**
```bash
./deploy.sh prod
```
æˆ–
```bash
make deploy
```

### ğŸ› ï¸ æ›´å¤šå‘½ä»¤

æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤ï¼š
```bash
make help
```

å¸¸ç”¨å‘½ä»¤ï¼š
- `make build` - æ„å»º Docker é•œåƒ
- `make dev` - å¯åŠ¨å¼€å‘ç¯å¢ƒ
- `make deploy` - éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ
- `make stop` - åœæ­¢æ‰€æœ‰æœåŠ¡
- `make logs` - æŸ¥çœ‹æœåŠ¡æ—¥å¿—
- `make shell` - è¿›å…¥ Django shell
- `make migrate` - è¿è¡Œæ•°æ®åº“è¿ç§»
- `make superuser` - åˆ›å»ºè¶…çº§ç”¨æˆ·

## ğŸ“ é¡¹ç›®ç»“æ„

```
book/
â”œâ”€â”€ accounts/           # ç”¨æˆ·è´¦æˆ·æ¨¡å—
â”œâ”€â”€ books/             # å›¾ä¹¦ç®¡ç†æ¨¡å—
â”œâ”€â”€ comments/          # è¯„è®ºç³»ç»Ÿæ¨¡å—
â”œâ”€â”€ booksite/          # Django é¡¹ç›®é…ç½®
â”œâ”€â”€ docker/            # Docker é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ docker-compose.dev.yml
â”‚   â”œâ”€â”€ dev.sh         # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ deploy.sh      # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ static/            # é™æ€æ–‡ä»¶
â”œâ”€â”€ templates/         # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ build.sh           # ä¸€é”®æ„å»ºè„šæœ¬
â”œâ”€â”€ deploy.sh          # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ Makefile           # Make å‘½ä»¤é…ç½®
â””â”€â”€ manage.py          # Django ç®¡ç†è„šæœ¬
```

## ğŸŒ è®¿é—®åœ°å€

### å¼€å‘ç¯å¢ƒ
- åº”ç”¨ä¸»é¡µ: http://localhost:8000
- ç®¡ç†åå°: http://localhost:8000/admin/
- API æ¥å£: http://localhost:8000/api/

### ç”Ÿäº§ç¯å¢ƒ
- åº”ç”¨ä¸»é¡µ: http://localhost
- ç®¡ç†åå°: http://localhost/admin/
- API æ¥å£: http://localhost/api/

## ğŸ”§ ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼

å¦‚æœæ‚¨æ›´å–œæ¬¢åˆ†æ­¥éª¤æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ï¼š

### å¼€å‘ç¯å¢ƒ

1. ç¡®ä¿å·²å®‰è£… Docker å’Œ Docker Compose
2. è¿›å…¥ docker ç›®å½•ï¼š
   ```bash
   cd docker
   ```
3. è¿è¡Œå¼€å‘ç¯å¢ƒï¼š
   ```bash
   ./dev.sh
   ```
4. è®¿é—®åº”ç”¨ï¼šhttp://localhost:8000

### ç”Ÿäº§ç¯å¢ƒ

1. è¿›å…¥ docker ç›®å½•ï¼š
   ```bash
   cd docker
   ```
2. å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š
   ```bash
   cp .env.example .env
   nano .env  # ä¿®æ”¹é…ç½®
   ```
3. è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼š
   ```bash
   ./deploy.sh
   ```
4. è®¿é—®åº”ç”¨ï¼šhttp://localhost

## ğŸ“¦ æœåŠ¡è¯´æ˜

### åŒ…å«çš„æœåŠ¡

- **web**: Django åº”ç”¨æœåŠ¡å™¨ (ç«¯å£ 8000)
- **redis**: Redis ç¼“å­˜æœåŠ¡ (ç«¯å£ 6379)
- **mongodb**: MongoDB æ•°æ®åº“ (ç«¯å£ 27017)
- **nginx**: Nginx åå‘ä»£ç† (ç«¯å£ 80/443)

## ğŸ”¨ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

1. å¯åŠ¨å¼€å‘ç¯å¢ƒï¼š
   ```bash
   make dev
   ```

2. è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š
   ```bash
   make migrate
   ```

3. åˆ›å»ºè¶…çº§ç”¨æˆ·ï¼š
   ```bash
   make superuser
   ```

4. æŸ¥çœ‹æ—¥å¿—ï¼š
   ```bash
   make logs
   ```

### ä»£ç æ›´æ”¹å

å¦‚æœä¿®æ”¹äº† Python ä»£ç ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨é‡è½½ã€‚å¦‚æœä¿®æ”¹äº† Docker é…ç½®ï¼Œéœ€è¦é‡æ–°æ„å»ºï¼š

```bash
make build
make restart
```

## ğŸš€ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

1. æ„å»ºé¡¹ç›®ï¼š
   ```bash
   make build
   ```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   ```bash
   cd docker
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®ç”Ÿäº§ç¯å¢ƒé…ç½®
   ```

3. éƒ¨ç½²ï¼š
   ```bash
   make deploy
   ```

## ğŸ“‹ å¸¸è§é—®é¢˜

### ç«¯å£å†²çª
å¦‚æœé‡åˆ°ç«¯å£å†²çªï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š
- 80 (nginx)
- 443 (nginx https)
- 8000 (django)
- 6379 (redis)
- 27017 (mongodb)

### æƒé™é—®é¢˜
ç¡®ä¿å½“å‰ç”¨æˆ·æœ‰ Docker è¿è¡Œæƒé™ï¼š
```bash
sudo usermod -aG docker $USER
```

### é‡æ–°æ„å»º
å¦‚æœé‡åˆ°é•œåƒé—®é¢˜ï¼Œå¯ä»¥å®Œå…¨é‡æ–°æ„å»ºï¼š
```bash
make clean
make build
```

## ğŸ“ æŠ€æœ¯æ ˆ

- **åç«¯**: Django 4.x, Django REST Framework
- **æ•°æ®åº“**: MongoDB
- **ç¼“å­˜**: Redis
- **å‰ç«¯**: HTML, CSS, JavaScript, Bootstrap
- **å®¹å™¨åŒ–**: Docker, Docker Compose
- **åå‘ä»£ç†**: Nginx

## ğŸ“„ è®¸å¯è¯

æ­¤é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Request å’Œ Issueï¼

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚
